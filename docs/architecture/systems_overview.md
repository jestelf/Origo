# Обзор систем

В новой версии движка основой является простая ECS‑архитектура.
Все сущности хранятся в `EntityManager`, а системы получают доступ к
компонентам через запросы.

## EntityManager

`EntityManager` отвечает за создание сущностей и индексирование их
компонентов. Сцена теперь содержит экземпляр менеджера и предоставляет
метод `create_entity()`, который возвращает готовую сущность с уникальным
идентификатором.

```python
scene = Scene()
player = scene.create_entity("player")
scene.entity_manager.add_component(player.id, RigidBody())
```

## Системы

Системы наследуются от базового класса `System` и автоматически получают
список подходящих сущностей. Например, `PhysicsSystem` ищет все
`RigidBody` и интегрирует их каждую итерацию.

По аналогии реализованы `RenderingSystem` и `AnimationSystem`, которые
работают с собственными компонентами.

Добавление новой системы выглядит так:

```python
manager = scene.entity_manager
render_system = RenderingSystem(manager)
scene.physics.update(0.016)  # другие системы вызываются аналогично
```

Каждая система хранит ссылку на менеджер и не требует ручной регистрации
компонентов: достаточно добавить их в сущность через `EntityManager`.
