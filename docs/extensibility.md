# Расширяемость Origo

Этот документ описывает базовый API для подключения сторонних плагинов и расширений.

## CLI-плагины

Плагины для `origo_cli` располагаются в каталоге `origo_cli/plugins`. Каждый
плагин представляет собой модуль Python и должен реализовывать функцию
`register(cli)`. При инициализации CLI вызывается загрузчик, который импортирует
все модули из стандартного каталога, а также из путей, перечисленных в переменной
окружения `ORIGO_CLI_PLUGIN_PATHS` (через `:`). Внутри `register` разработчик
может добавить новые команды или произвести первоначальную настройку.

Пример минимального плагина:

```python
# my_plugin.py

def register(cli):
    print("Plugin active")
```

После установки плагинов CLI можно запустить так:

```bash
python -m origo_cli.runner validate-shaders
```

Загрузчик подключит все модули из `origo_cli/plugins` и передаст CLI объект в их
функцию `register`, поэтому команда `validate-shaders` станет доступна.

## Игровые расширения

Внешние расширения располагаются в каталоге `extensions/` в корне проекта либо в
папках, указанных в переменной окружения `ORIGO_EXT_PATHS`. Каждый пакет
расширения должен предоставлять функцию `init_extension(engine)`, которая получит
ссылку на экземпляр движка или приложения и выполнит необходимые действия.

```python
# extensions/example_ext/__init__.py

def init_extension(engine):
    print("Extension initialized", engine)
```

Загрузить расширения можно вызовом:

```python
from extensions import load_extensions
load_extensions(engine)
```

Такой подход позволяет сторонним разработчикам подключать собственные модули без
изменения исходного кода проекта.
